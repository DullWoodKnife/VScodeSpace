Python作用域详细介绍



当我们在编写 Python 代码时，我们会遇到不同的作用域。作用域定义了变量和函数的可见性和访问规则。在 Python 中，有四种主要的作用域，它们是：全局作用域（Global Scope）、局部作用域（Local Scope）、嵌套作用域（Enclosing Scope）和内置作用域（Built-in Scope）。

![img](https://pics5.baidu.com/feed/7dd98d1001e939010a99e712f66431eb37d19693.jpeg@f_auto?token=91c30f5ef099527cb84b4f5a3e1fbde6)

### 1. 全局作用域（Global Scope）：

- 全局作用域是在代码中任何函数、类或语句块之外定义的变量和函数的作用域。
- 在全局作用域中定义的变量可以在代码的任何位置访问。
- 示例：

```
global_var = 10  # 全局作用域中的变量

def my_function():
    print(global_var)  # 在函数中访问全局作用域中的变量

my_function()  # 输出: 10
```

### 2. 局部作用域（Local Scope）：

- 局部作用域是在函数或语句块内部定义的变量和函数的作用域。

- 在局部作用域中定义的变量只能在所在的函数或语句块内部访问。

- 示例：

  ```
  def my_function():
      local_var = 20  # 局部作用域中的变量
    print(local_var)
  
  my_function()  # 输出: 20
  print(local_var)  # 报错，局部作用域中的变量在外部不可访问
  ```

### 3. 嵌套作用域（Enclosing Scope）：

- 嵌套作用域是指在一个函数内部定义的另一个函数的作用域。
- 在嵌套作用域中，内部函数可以访问外部函数中的变量。
- 示例：

```
def outer_function():
    outer_var = 30  # 外部函数的变量

    def inner_function():
        print(outer_var)  # 在内部函数中访问外部函数的变量

  inner_function()

outer_function()  # 输出: 30
```

### 4. 内置作用域（Built-in Scope）：

- 内置作用域是 Python 内置的函数和变量的作用域。
- 在任何地方都可以访问内置作用域中的函数和变量，无需导入任何模块。
- 示例：

```
print(len([1, 2, 3]))  # 使用内置作用域中的函数len()
```

### 作用域对象是什么

在Python中，作用域对象是指代表作用域的特殊对象。作用域对象是一个存储变量和函数名称与其对应值的字典。它用于存储当前作用域中的变量和函数，并提供对这些名称和值的访问和操作。

在Python中，每个作用域都有一个关联的作用域对象，它可以通过`locals()`函数或`globals()`函数来获取。这些函数返回当前作用域的作用域对象，其中`locals()`返回局部作用域对象，而`globals()`返回全局作用域对象。

作用域对象是动态的，可以根据作用域中的变量和函数的添加、修改和删除而变化。它提供了一种方式来查找和操作作用域中的名称和值。

以下是一个示例，演示如何使用作用域对象：

```
def my_function():
  local_var = 10
  print(locals())  # 获取局部作用域对象

global_var = 20
print(globals())  # 获取全局作用域对象

my_function()
```

在上述示例中，我们使用`locals()`函数和`globals()`函数分别获取了局部作用域对象和全局作用域对象。通过打印这些作用域对象，我们可以看到它们是以字典的形式存储变量和函数的名称及其对应的值。

作用域对象可以用于动态地访问和操作作用域中的名称和值。通过在作用域对象上使用字典操作，我们可以获取、修改和删除作用域中的变量和函数。但是需要注意的是，对于全局作用域对象，只能获取和修改它的值，而不能删除它。

了解作用域对象可以帮助我们更好地理解作用域的工作原理，并进行动态的变量和函数处理。它在一些特定的编程场景中，如动态名称查找和执行时，可能会发挥重要的作用。